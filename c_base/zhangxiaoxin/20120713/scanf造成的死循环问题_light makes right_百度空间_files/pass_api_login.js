var bdPass=bdPass||{};bdPass.api=bdPass.api||{};bdPass.api.login=bdPass.api.login||(function(){var u="https://passport.baidu.com/",r=u+"v2/?reggetcodestr&callback=",h=u+"v2/api/?login",i=u+"v2/api/?logincheck",A=u+"cgi-bin/genimage?",o=u+"img/v2/small_blank.gif",p=u+"forcsdnpasschange",t=document.charset||document.characterSet||"UTF-8",j={outerDomId:"",loginType:1,staticpage:"",u:"",bindEnterSubmit:false,safeflg:0,isMen:true,isPhone:false,onReady:function(J){},onInputErr:function(K,L,J){},onInputOk:function(J){},onSubmitStart:function(J){J.submit()},onCheckErr:function(K,J){},onSubmitedErr:function(K,J){},onSystemErr:function(L,K,J){},onLoginSuccess:function(K,J,L){if(J){J=decodeURIComponent(J);if(L.needToModifyPassword=="1"){document.location=p+"?u="+J}else{document.location=decodeURIComponent(J)}}}},B=[],f={username:{type:"username",inputType:"text",rdNameKey:"username",label:"\u5E10\u53f7\uff1a",err:{"-2":"\u8bf7\u586b\u5199\u5E10\u53f7","-3":"\u5E10\u53f7\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","-11":"\u60a8\u5c1d\u8bd5\u4f7f\u7528\u90ae\u7bb1\u767b\u5f55\uff0c\u4f46\u90ae\u7bb1\u592a\u957f\u3002\uff08\u4e0d\u8d85\u8fc760\u4e2a\u5b57\u8282\uff09","-21":"\u60a8\u5c1d\u8bd5\u4f7f\u7528\u7528\u6237\u540d\u767b\u5f55\uff0c\u4f46\u7528\u6237\u540d\u592a\u957f\u3002\uff08\u4e0d\u8d85\u8fc77\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u8282\uff09","1":"\u7528\u6237\u540d\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2":"\u6b64\u5E10\u53f7\u4e0d\u5b58\u5728"},initEvent:[{eventType:"blur",runBeforeSubmit:false,listener:function(){a("username",this)}},{eventType:"keydown",runBeforeSubmit:false,listener:function(J){}},{eventType:"change",runBeforeSubmit:true,listener:function(K,L){var M=L?baidu.g(K):this;if(a("username",M)){var N=M.value,J=N.length;if(/^[0-9a-zA-Z\.\_-]+@([0-9a-zA-Z-]+\.)+[a-z]{2,4}$/.test(N)){if(J>60){d("username",M,"-11");return false}else{if(!L){H(M)}c(M);return true}}else{if(!L){H(M)}c(M);return true}}else{return false}}}]},phoneNumber:{type:"phoneNumber",inputType:"text",rdNameKey:"username",label:"\u624b\u673a\u53f7\uff1a",err:{"-2":"\u8bf7\u586b\u5199\u624b\u673a\u53f7","-3":"\u5E10\u53f7\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","1":"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2":"\u6b64\u5E10\u53f7\u4e0d\u5b58\u5728"},initEvent:[{eventType:"blur",runBeforeSubmit:false,listener:function(){a("username",this)}},{eventType:"keydown",runBeforeSubmit:false,listener:function(J){s(J)}},{eventType:"change",runBeforeSubmit:true,listener:function(J,K){var L=K?baidu.g(J):this;if(a("phoneNumber",L)){if(/^\d{1,11}$/.test(L.value)){if(!K){H(L)}c(L);return true}else{d("phoneNumber",L,"-3");return false}}else{return false}}}]},password:{type:"password",inputType:"password",rdNameKey:"password",label:"\u5bc6\u7801\uff1a",err:{"-2":"\u8bf7\u586b\u5199\u5bc6\u7801","4":"\u767b\u5f55\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"},initEvent:[{eventType:"keydown",runBeforeSubmit:false,listener:function(J){s(J)}},{eventType:"blur",runBeforeSubmit:true,listener:function(J,K){var L=K?baidu.g(J):this;if(a("password",L)){c(L);return true}else{return false}}}]},verifycode:{type:"verifycode",inputType:"text",rdNameKey:"verifycode",maxlength:'maxlength="4"',label:"\u9a8c\u8bc1\u7801\uff1a",err:{"-2":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801","6":"\u9a8c\u8bc1\u7801\u4e0d\u5339\u914d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u9a8c\u8bc1\u7801","257":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},initEvent:[{eventType:"keydown",runBeforeSubmit:false,listener:function(J){s(J)}},{eventType:"blur",runBeforeSubmit:true,listener:function(J,K){var L=K?baidu.g(J):this;if(a("verifycode",L)){c(L);return true}else{return false}}}]}},E={"-1":"\u767b\u5f55\u65f6\u53d1\u751f\u672a\u77e5\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","5":"\u60a8\u5c1d\u8bd5\u767b\u5f55\u6b21\u6570\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf724\u5c0f\u65f6\u540e\u518d\u8bd5","16":"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u73b0\u5728\u65e0\u6cd5\u767b\u5f55","100005":"\u6b64\u5e10\u53f7\u5df2\u767b\u5f55\u4eba\u6570\u8fc7\u591a","110024":"\u6b64\u5E10\u53f7\u8fd8\u672a\u6fc0\u6d3b\uff0c\u8bf7\u5230\u9a8c\u8bc1\u90ae\u4ef6\u4e2d\u6fc0\u6d3b\uff0c\u6216\u8005\u91cd\u53d1\u9a8c\u8bc1\u90ae\u4ef6"},D='<p class="pass_login_p pass_login_p_#{type}" id="pass_login_p_#{type}_#{indexNumber}"><label class="pass_login_label pass_login_label_#{type}" id="pass_login_label_#{type}_#{indexNumber}" for="pass_login_#{type}_#{indexNumber}">#{label}</label><input class="pass_login_input pass_login_input_#{type}" type="#{inputType}" id="pass_login_#{type}_#{indexNumber}" name="#{rdNameKey}"/><span class="pass_login_err" id="pass_login_#{type}_#{indexNumber}_err"></span></p>',y='<p class="pass_login_p pass_login_p_img_verifycode" id="pass_login_p_img_verifycode_#{indexNumber}"><img src="#{_tempImgUrl}" class="pass_login_verifycode" id="pass_login_img_verifycode_#{indexNumber}" alt="\u9a8c\u8bc1\u7801\u56fe\u7247" title="\u9a8c\u8bc1\u7801\u56fe\u7247" /><span class="pass_login_change_verifycode" id="pass_login_change_verifycode_#{indexNumber}">\u770b\u4e0d\u6e05\uff1f</span></p>',e='<form class ="pass_login_form" id="pass_login_form_#{indexNumber}" form_number="#{indexNumber}" action="#{formAction}" target="pass_login_iframe_#{indexNumber}" method="post" style="display:none;"><iframe name="pass_login_iframe_#{indexNumber}" id="pass_login_iframe_#{indexNumber}" src="javascript:\'\'" style="display:none;"></iframe><p class="pass_login_p" id="pass_login_p_generalerror_#{indexNumber}"><span class="pass_login_generalerror" id="pass_login_generalerror_#{indexNumber}"></span></p>',g='<p class="pass_login_p pass_login_p_rem" id="pass_login_p_rem_#{indexNumber}"><input class="pass_login_input pass_login_input_rem" id="pass_login_rem_#{indexNumber}" name="mem_pass" type="checkbox"#{isMen}/><label class="pass_login_label pass_login_label_rem" id="pass_login_label_rem_#{indexNumber}" for="pass_login_rem_#{indexNumber}">\u8bb0\u4f4f\u6211\u7684\u767b\u5f55\u72b6\u6001</label></p><p class="pass_login_p pass_login_p_des" id="pass_login_p_des_#{indexNumber}">\u4f7f\u7528\u516c\u7528\u7535\u8111\u8bf7\u52ff\u9009\u62e9\u8be5\u9879</p><p class="pass_login_p pass_login_p_btn" id="pass_login_p_btn_#{indexNumber}"><input class="pass_login_input pass_login_input_submit" id="pass_login_input_submit_#{indexNumber}" type="button" value="\u767b\u5f55"/><a href="https://passport.baidu.com/?getpass_index" class="pass_login_a_fgtpwd" id="pass_login_a_fgtpwd_#{indexNumber}">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a></p></form>',b='<input type="hidden" id="pass_login_hidden_#{name}_#{indexNumber}" name="#{name}" value="#{value}"/>',l=function(J){B.push({myConfig:{},formHiddenElements:{}});var L=B.length-1;for(var K in j){if(J&&typeof(j[K])==typeof(J[K])){B[L].myConfig[K]=J[K]}else{B[L].myConfig[K]=j[K]}}B[L].myConfig.formSimpleElementsArray=B[L].myConfig.isPhone?["phoneNumber","password","verifycode"]:["username","password","verifycode"];m(L,[{key:"callback",value:"parent.bdPass.api.login._postCallback"},{key:"tpl",value:bdPass.api.params.login_tpl||""},{key:"loginType",value:B[L].myConfig.loginType},{key:"staticpage",value:B[L].myConfig.staticpage},{key:"safeflg",value:B[L].myConfig.safeflg},{key:"u",value:B[L].myConfig.u},{key:"index",value:L},{key:"isPhone",value:B[L].myConfig.isPhone?true:false},{key:"token",value:bdPass.api.params.login_token},{key:"codestring",value:bdPass.api.params.login_vcodestring||""},{key:"charset",value:t},{key:"ppui_logintime",value:""}]);x(L);bdPass.api.login.loginTime=bdPass.api.login.loginTime||[];bdPass.api.login.loginTime[L]=+new Date},m=function(M,L){for(var K=0,J=L.length;K<J;K++){B[M].formHiddenElements[L[K].key]={name:L[K].key,value:L[K].value,indexNumber:M}}},I=function(P){var M=P.error+"",O=P.index,K=P.u;var N=P.hao123Param||"";var L=function(R){var S=[];return function(U){var T=S.push(new Image)-1;S[T].onload=function(){R&&R();S[T]=S[T].onload=null};S[T].src=U}}();if(M=="0"){if("https:"==document.location.protocol){B[O].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+O),K,P)}else{var Q=setTimeout(function(){B[O].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+O),K,P)},1000);L("http://user.hao123.com/static/crossdomain.php?bdu="+N+"&t="+Math.random(),function(){clearTimeout(Q);B[O].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+O),K,P)})}}else{if(P.codestring&&P.codestring!="undefined"){w(O,P.codestring,true)}else{z(O,true)}var J;switch(M){case"1":case"2":J=B[O].myConfig.isPhone?"phoneNumber":"username";break;case"4":J="password";break;case"6":case"257":J="verifycode";break;case"-1":case"5":case"16":case"100005":case"110024":J="generalerror";break;default:J="generalerror";M="-1";break}d(J,baidu.g("pass_login_"+J+"_"+O),M,{mail:P.mail});B[O].myConfig.onSubmitedErr(baidu.g("pass_login_form_"+O),baidu.g("pass_login_"+J+"_"+O))}},x=function(J){B[J].myindexNumber=J;var K,N=B[J].myConfig.formSimpleElementsArray,L="",T={indexNumber:J,formAction:h,remInputName:B[J].remInputName,isMen:B[J].myConfig.isMen?' checked="checked"':""},S="pass_login_form_"+J;K=N.length;L+=baidu.string.format(e,T);L+=baidu.string.format(g,T);baidu.g(B[J].myConfig.outerDomId).innerHTML+=L;baidu.event.on("pass_login_input_submit_"+J,"click",F);while(K){L="";var P=f[N[K-1]];if(P){P.indexNumber=J;var R="pass_login_"+P.type+"_"+J;B[J][P.type+"_id"]=R;L+=baidu.string.format(D,P);if(P.type=="verifycode"){P._tempImgUrl=o;L+=baidu.string.format(y,P)}}baidu.dom.insertHTML(S,"afterBegin",L);if(P.type=="verifycode"){var U=B[J].formHiddenElements.codestring.value;if(U){w(J,U,false)}else{z(J,false)}baidu.event.on("pass_login_change_verifycode_"+J,"click",function(W){var V=C(this.id);baidu.sio.callByServer(r+"bdPass.api.login._changeNewVcodeCallback&index="+J);imgDom.src=A+baidu.g("pass_login_form_"+V)["codestring"].value+"&v="+new Date().getTime()})}q(R,P,"initEvent");K--}var O=B[J].formHiddenElements;for(var Q in O){baidu.dom.insertHTML(S,"afterBegin",baidu.string.format(b,O[Q]))}var M=baidu.g(S);M.style.display="";B[J].myConfig.onReady(M)},q=function(N,O,M){if(M!="initEvent"&&M!="actionEvent"){return}var K=O[M];if(K){for(var L=0,J=K.length;L<J;L++){baidu.event.on(N,K[L].eventType,K[L].listener)}}},H=function(J){var K=C(J.id);baidu.sio.callByServer(i+"&callback=bdPass.api.login._needCodestringCheckCallback&tpl="+(bdPass.api.params.login_tpl||"")+"&charset="+t+"&index="+K+"&username="+J.value+"&time="+new Date().getTime())},G=function(J){if(J.errno==0){if(J.codestring){w(J.index,J.codestring,true)}else{z(J.index,true)}}},v=function(J){if(J.error_no=="110000"){baidu.g("pass_login_img_verifycode_"+J.thisIndex).setAttribute("src",A+J.verifystr+"&v="+new Date().getTime());baidu.g("pass_login_hidden_codestring_"+J.thisIndex).value=J.verifystr}},F=function(P){var J=baidu.event.getTarget(P).form,U=J.getAttribute("form_number"),T=B[U];var K=T.myConfig.haveCodeString?T.myConfig.formSimpleElementsArray:baidu.array.remove(T.myConfig.formSimpleElementsArray,"verifycode");for(var N=0,L=K.length;N<L;N++){for(var M=0,S=f[K[N]].initEvent,R=S.length;M<R;M++){var O=S[M];if(O.runBeforeSubmit){var Q="pass_login_"+K[N]+"_"+T.myindexNumber;if(!O.listener(Q,true)){B[U].myConfig.onCheckErr(J,baidu.g(Q));return}}}}baidu.g("pass_login_generalerror_"+U).innerHTML="";baidu.dom.g("pass_login_hidden_ppui_logintime_"+U).value=+new Date-bdPass.api.login.loginTime[U];B[U].myConfig.onSubmitStart(J)},a=function(K,J){if(J&&J.value==""){d(K,J,"-2");return false}else{return true}},n=function(J){if(typeof(J)=="string"){return J+"_err"}else{return baidu.g(J).id+"_err"}},d=function(L,K,N,J){var J=J||null;N+="";var O=C(K.id);if(L=="generalerror"){K.innerHTML=E[N];B[O].myConfig.onSystemErr(baidu.g("pass_login_form_"+O),N,J)}else{var M,O;M=baidu.g(n(K));M.innerHTML=f[L].err[N];B[O].myConfig.onInputErr(K,N,J)}if(N!=110024){}},c=function(J){var K=C(J.id);k(J);B[K].myConfig.onInputOk(J)},k=function(J){var K=baidu.g(n(J));K.innerHTML=""},C=function(J){return J.charAt(J.length-1)},w=function(L,J,K){B[L].myConfig.haveCodeString=true;B[L].myConfig.formSimpleElementsArray=[B[L].myConfig.formSimpleElementsArray[0],B[L].myConfig.formSimpleElementsArray[1],"verifycode"];baidu.g("pass_login_img_verifycode_"+L).setAttribute("src",A+J+"&v="+new Date().getTime());if(K){baidu.g("pass_login_hidden_codestring_"+L).value=J}baidu.g("pass_login_p_verifycode_"+L).style.display=baidu.g("pass_login_p_img_verifycode_"+L).style.display=""},z=function(K,J){B[K].myConfig.haveCodeString=false;B[K].myConfig.formSimpleElementsArray=[B[K].myConfig.formSimpleElementsArray[0],B[K].myConfig.formSimpleElementsArray[1]];if(J){baidu.g("pass_login_hidden_codestring_"+K).value=""}baidu.g("pass_login_p_verifycode_"+K).style.display=baidu.g("pass_login_p_img_verifycode_"+K).style.display="none"},s=function(J){if(baidu.event.getKeyCode(J)=="13"){baidu.event.fire("pass_login_input_submit_"+C(baidu.event.getTarget(J).id),"click")}};return{init:function(J){if(J&&J.outerDomId&&typeof(J.outerDomId)=="string"&&J.staticpage&&typeof(J.staticpage)=="string"){l(J)}else{throw new Error("\u914d\u7f6e\u9879\u7f3a\u5c11\u5fc5\u586b\u9879\uff0c\u914d\u7f6e\u9879\u5bf9\u8c61\u5fc5\u987b\u6709<string>outerDomId\u548c<string>staticpage\u5b57\u6bb5");return}},_needCodestringCheckCallback:function(J){G(J)},_changeNewVcodeCallback:function(J){v(J)},_postCallback:function(J){I(J)}}})();(function(){window.bdPass.LoginTemplate=window.bdPass.LoginTemplate||{};window.bdPass.LoginTemplate.render=function(d,a,b){if(!b.jumpUrl){alert("No jumpUrl");throw new Error("No jumpUrl");return}var c=b;c.outerDomId=a;c.staticpage=b.jumpUrl;c.onSubmitStart=b.onSubmit;c.onLoginSuccess=b.onSuccess;c.onReady=b.onAfterRender;c.onSystemErr=b.onSystemError;bdPass.api.login.init(c)};if(bdPass.api.params.userCallback){bdPass.api.params.userCallback()}bdPass.api["parent.bdPass.api.login._postCallback"]=bdPass.api.login._postCallback})();