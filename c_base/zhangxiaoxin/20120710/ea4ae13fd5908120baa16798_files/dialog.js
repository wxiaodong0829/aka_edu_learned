if(!Array.prototype.push){Array.prototype.push=function(){var b=this.length;for(var a=0;a<arguments.length;a++){this[b+a]=arguments[a]}return this.length}}function G(){var b=new Array();for(var c=0;c<arguments.length;c++){var a=arguments[c];if(typeof a=="string"){a=document.getElementById(a)}if(arguments.length==1){return a}b.push(a)}return b}Function.prototype.bind=function(b){var a=this;return function(){a.apply(b,arguments)}};Function.prototype.bindAsEventListener=function(b){var a=this;return function(c){a.call(b,c||window.event)}};Object.extend=function(a,b){for(property in b){a[property]=b[property]}return a};if(!window.Event){var Event=new Object()}Object.extend(Event,{observers:false,element:function(a){return a.target||a.srcElement},isLeftClick:function(a){return(((a.which)&&(a.which==1))||((a.button)&&(a.button==1)))},pointerX:function(a){return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(a){return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}},findElement:function(b,c){var a=Event.element(b);while(a.parentNode&&(!a.tagName||(a.tagName.toUpperCase()!=c.toUpperCase()))){a=a.parentNode}return a},_observeAndCache:function(b,c,d,a){if(!this.observers){this.observers=[]}if(b.addEventListener){this.observers.push([b,c,d,a]);b.addEventListener(c,d,a)}else{if(b.attachEvent){this.observers.push([b,c,d,a]);b.attachEvent("on"+c,d)}}},unloadCache:function(){if(!Event.observers){return}for(var a=0;a<Event.observers.length;a++){Event.stopObserving.apply(this,Event.observers[a]);Event.observers[a][0]=null}Event.observers=false},observe:function(b,c,d,a){var b=G(b);a=a||false;if(c=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||b.attachEvent)){c="keydown"}this._observeAndCache(b,c,d,a)},stopObserving:function(b,c,d,a){var b=G(b);a=a||false;if(c=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||b.detachEvent)){c="keydown"}if(b.removeEventListener){b.removeEventListener(c,d,a)}else{if(b.detachEvent){b.detachEvent("on"+c,d)}}}});Event.observe(window,"unload",Event.unloadCache,false);var Class=function(){var a=function(){this.initialize.apply(this,arguments)};for(i=0;i<arguments.length;i++){superClass=arguments[i];for(member in superClass.prototype){a.prototype[member]=superClass.prototype[member]}}a.child=function(){return new Class(this)};a.extend=function(b){for(property in b){a.prototype[property]=b[property]}};return a};function space(a){if(a=="begin"){var b=document.getElementById("ft");if(typeof(b)!="undefined"&&b!=null){b.id="ft_popup"}b=document.getElementById("usrbar");if(typeof(b)!="undefined"&&b!=null){b.id="usrbar_popup"}}else{if(a=="end"){var b=document.getElementById("ft_popup");if(typeof(b)!="undefined"&&b!=null){b.id="ft"}b=document.getElementById("usrbar_popup");if(typeof(b)!="undefined"&&b!=null){b.id="usrbar"}}}}var Popup=new Class();Popup.prototype={iframeIdName:"ifr_popup",initialize:function(a){this.config=Object.extend({contentType:1,isHaveTitle:true,scrollType:"no",isBackgroundCanClick:false,isSupportDraging:true,isShowShadow:true,isReloadOnClose:true,width:400,height:300},a||{});this.info={shadowWidth:4,title:"",contentUrl:"",contentHtml:"",callBack:null,parameter:null,confirmCon:"",alertCon:"",someHiddenTag:"select,object,embed",someDisabledBtn:"",someHiddenEle:"",overlay:0,coverOpacity:40};this.color={cColor:"#EEEEEE",bColor:"#FFFFFF",tColor:"#EEF5CC",wColor:"#000000",tbColor:"#82B324"};this.dropClass=null;this.someToHidden=[];this.someToDisabled=[];if(!this.config.isHaveTitle){this.config.isSupportDraging=false}this.iniBuild()},setContent:function(a,b){if(b!=""){switch(a){case"width":this.config.width=b;break;case"height":this.config.height=b;break;case"title":this.info.title=b;break;case"contentUrl":this.info.contentUrl=b;break;case"contentHtml":this.info.contentHtml=b;break;case"callBack":this.info.callBack=b;break;case"parameter":this.info.parameter=b;break;case"confirmCon":this.info.confirmCon=b;break;case"alertCon":this.info.alertCon=b;break;case"someHiddenTag":this.info.someHiddenTag=b;break;case"someHiddenEle":this.info.someHiddenEle=b;break;case"someDisabledBtn":this.info.someDisabledBtn=b;break;case"overlay":this.info.overlay=b}}},iniBuild:function(){G("dialogCase")?G("dialogCase").parentNode.removeChild(G("dialogCase")):function(){};var a=document.createElement("span");a.id="dialogCase";document.body.appendChild(a)},build:function(){var a=10001+this.info.overlay*10;var g=a+2;this.iframeIdName="ifr_popup"+this.info.overlay;var e="http://img.baidu.com/hi/img/";var c='<input type="image" id="dialogBoxClose" src="'+e+'dialogclose2.gif" border="0" width="16" height="16" align="absmiddle" title="关闭"/>';var b="filter: alpha(opacity="+this.info.coverOpacity+");opacity:"+this.info.coverOpacity/100+";";var f='<div id="dialogBoxBG" style="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:'+a+";"+b+"background-color:"+this.color.cColor+';display:none;"></div>';var d='<div id="dialogBox" style="border:0;display:none;z-index:'+g+";position:relative;width:"+this.config.width+'px;"><table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="'+this.color.bColor+'" style="border:1px solid '+this.color.tbColor+'">';if(this.config.isHaveTitle){d+='<tr height="24" bgcolor="'+this.color.tColor+'"><td><table style="-moz-user-select:none;height:24px; border-bottom:1px solid '+this.color.tbColor+';" width="100%" border="0" cellpadding="0" cellspacing="0" ><tr><td width="6" height="24"></td><td id="dialogBoxTitle" style="color:'+this.color.wColor+';font-size:14px;font-weight:bold;">'+this.info.title+'&nbsp;</td><td id="dialogClose" width="20" align="right" valign="middle">'+c+'</td><td width="6"></td></tr></table></td></tr>'}else{d+='<tr height="10"><td align="right">'+c+"</td></tr>"}d+='<tr style="height:'+this.config.height+'px" valign="top"><td id="dialogBody" style="position:relative;"></td></tr></table></div><div id="dialogBoxShadow" style="display:none;z-index:'+a+';"></div>';if(!this.config.isBackgroundCanClick){G("dialogCase").innerHTML=f+d;G("dialogBoxBG").style.height=document.body.scrollHeight}else{G("dialogCase").innerHTML=d}Event.observe(G("dialogBoxClose"),"click",this.reset.bindAsEventListener(this),false);if(this.config.isSupportDraging){dropClass=new Dragdrop(this.config.width,this.config.height,this.info.shadowWidth,this.config.isSupportDraging,this.config.contentType);G("dialogBoxTitle").style.cursor="move"}this.lastBuild()},lastBuild:function(){var f='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.confirmCon+'</div><div style="margin:20px;"><input id="dialogOk" type="button" value="  确定  "/>&nbsp;<input id="dialogCancel" type="button" value="  取消  "/></div></div>';var c='<div style="width:100%;height:100%;text-align:center;"><div style="margin:20px 20px 0 20px;font-size:14px;line-height:16px;color:#000000;">'+this.info.alertCon+'</div><div style="margin:20px;"><input id="dialogYES" type="button" value="  确定  "/></div></div>';var a=10001+this.info.overlay*10;var d=a+4;if(this.config.contentType==1){var e="<iframe width='100%' style='height:"+this.config.height+"px' name='"+this.iframeIdName+"' id='"+this.iframeIdName+"' src='"+this.info.contentUrl+"' frameborder='0' scrolling='"+this.config.scrollType+"'></iframe>";var b="<div id='iframeBG' style='position:absolute;top:0px;left:0px;width:1px;height:1px;z-index:"+d+";filter: alpha(opacity=00);opacity:0.00;background-color:#ffffff;'><div>";G("dialogBody").innerHTML=e+b}else{if(this.config.contentType==2){G("dialogBody").innerHTML=this.info.contentHtml}else{if(this.config.contentType==3){G("dialogBody").innerHTML=f;Event.observe(G("dialogOk"),"click",this.forCallback.bindAsEventListener(this),false);Event.observe(G("dialogCancel"),"click",this.close.bindAsEventListener(this),false)}else{if(this.config.contentType==4){G("dialogBody").innerHTML=c;Event.observe(G("dialogYES"),"click",this.close.bindAsEventListener(this),false)}}}}},reBuild:function(){G("dialogBody").height=G("dialogBody").clientHeight;this.lastBuild()},show:function(){this.hiddenSome();this.middle();if(this.config.isShowShadow){this.shadow()}},forCallback:function(){return this.info.callBack(this.info.parameter)},shadow:function(){var a=G("dialogBoxShadow");var b=G("dialogBox");a.style.position="absolute";a.style.background="#000";a.style.display="";a.style.opacity="0.2";a.style.filter="alpha(opacity=20)";a.style.top=b.offsetTop+this.info.shadowWidth;a.style.left=b.offsetLeft+this.info.shadowWidth;a.style.width=b.offsetWidth;a.style.height=b.offsetHeight},middle:function(){if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display=""}var c=G("dialogBox");c.style.position="absolute";c.style.display="";var f=document.body.clientWidth;var d=document.body.clientHeight;var g=document.body.scrollTop;var e=(document.body.clientWidth/2)-(c.offsetWidth/2);var b=-80+(d/2+g)-(c.offsetHeight/2);var a=b>0?b:(d/2+g)-(c.offsetHeight/2);if(a<1){a="20"}if(e<1){e="20"}c.style.left=e;c.style.top=a},reset:function(){if(this.config.isReloadOnClose){top.location.reload()}this.close()},close:function(){G("dialogBox").style.display="none";if(!this.config.isBackgroundCanClick){G("dialogBoxBG").style.display="none"}if(this.config.isShowShadow){G("dialogBoxShadow").style.display="none"}G("dialogBody").innerHTML="";this.showSome()},hiddenSome:function(){var a=this.info.someHiddenTag.split(",");if(a.length==1&&a[0]==""){a.length=0}for(var c=0;c<a.length;c++){this.hiddenTag(a[c])}var b=this.info.someHiddenEle.split(",");if(b.length==1&&b[0]==""){b.length=0}for(var c=0;c<b.length;c++){this.hiddenEle(b[c])}var b=this.info.someDisabledBtn.split(",");if(b.length==1&&b[0]==""){b.length=0}for(var c=0;c<b.length;c++){this.disabledBtn(b[c])}space("begin")},disabledBtn:function(b){var a=document.getElementById(b);if(typeof(a)!="undefined"&&a!=null&&a.disabled==false){a.disabled=true;this.someToDisabled.push(a)}},hiddenTag:function(c){var b=document.getElementsByTagName(c);if(b!=null){for(var a=0;a<b.length;a++){if(b[a].style.display!="none"&&b[a].style.visibility!="hidden"){b[a].style.visibility="hidden";this.someToHidden.push(b[a])}}}},hiddenEle:function(b){var a=document.getElementById(b);if(typeof(a)!="undefined"&&a!=null){a.style.visibility="hidden";this.someToHidden.push(a)}},showSome:function(){for(var a=0;a<this.someToHidden.length;a++){this.someToHidden[a].style.visibility="visible"}for(var a=0;a<this.someToDisabled.length;a++){this.someToDisabled[a].disabled=false}space("end")}};var Dragdrop=new Class();Dragdrop.prototype={initialize:function(d,e,a,c,b){this.dragData=null;this.dragDataIn=null;this.backData=null;this.width=d;this.height=e;this.shadowWidth=a;this.showShadow=c;this.contentType=b;this.IsDraging=false;this.oObj=G("dialogBox");Event.observe(G("dialogBoxTitle"),"mousedown",this.moveStart.bindAsEventListener(this),false)},moveStart:function(a){this.IsDraging=true;if(this.contentType==1){G("iframeBG").style.display="";G("iframeBG").style.width=this.width;G("iframeBG").style.height=this.height}Event.observe(document,"mousemove",this.mousemove.bindAsEventListener(this),false);Event.observe(document,"mouseup",this.mouseup.bindAsEventListener(this),false);Event.observe(document,"selectstart",this.returnFalse,false);this.dragData={x:Event.pointerX(a),y:Event.pointerY(a)};this.backData={x:parseInt(this.oObj.style.left),y:parseInt(this.oObj.style.top)}},mousemove:function(a){if(!this.IsDraging){return}var b=Event.pointerX(a)-this.dragData.x+parseInt(this.oObj.style.left);var c=Event.pointerY(a)-this.dragData.y+parseInt(this.oObj.style.top);if(this.dragData.y<parseInt(this.oObj.style.top)){c=c-12}else{if(this.dragData.y>parseInt(this.oObj.style.top)+25){c=c+12}}this.oObj.style.left=b;this.oObj.style.top=c;if(this.showShadow){G("dialogBoxShadow").style.left=b+this.shadowWidth;G("dialogBoxShadow").style.top=c+this.shadowWidth}this.dragData={x:Event.pointerX(a),y:Event.pointerY(a)};document.body.style.cursor="move"},mouseup:function(b){if(!this.IsDraging){return}if(this.contentType==1){G("iframeBG").style.display="none"}document.onmousemove=null;document.onmouseup=null;var c=Event.pointerX(b)-(document.documentElement.scrollLeft||document.body.scrollLeft);var a=Event.pointerY(b)-(document.documentElement.scrollTop||document.body.scrollTop);if(c<1||a<1||c>document.body.clientWidth||a>document.body.clientHeight){this.oObj.style.left=this.backData.x;this.oObj.style.top=this.backData.y;if(this.showShadow){G("dialogBoxShadow").style.left=this.backData.x+this.shadowWidth;G("dialogBoxShadow").style.top=this.backData.y+this.shadowWidth}}this.IsDraging=false;document.body.style.cursor="";Event.stopObserving(document,"selectstart",this.returnFalse,false)},returnFalse:function(){return false}};