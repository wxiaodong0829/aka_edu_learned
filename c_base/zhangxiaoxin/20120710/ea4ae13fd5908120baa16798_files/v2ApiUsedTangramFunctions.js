/*!
*	这是tangram 1.5.0版本的的一部分
*	仅包含了passport的新版（v2）api的reg、login、fillinusername、changeemail等api所需的方法
*	另外最后还有一行代码是用作异步回调的
*	author:qinjieyou
*	date:Feb 10,2012
*/
var T,baidu=T=baidu||{version:"1.5.0"};baidu.guid="$BAIDU$";baidu.$$=window[baidu.guid]=window[baidu.guid]||{global:{}};baidu.dom=baidu.dom||{};baidu.dom.g=function(b){if(!b){return null}if("string"==typeof b||b instanceof String){return document.getElementById(b)}else{if(b.nodeName&&(b.nodeType==1||b.nodeType==9)){return b}}return null};baidu.g=baidu.G=baidu.dom.g;baidu.sio=baidu.sio||{};baidu.lang=baidu.lang||{};baidu.lang.isFunction=function(b){return"[object Function]"==Object.prototype.toString.call(b)};baidu.lang.isString=function(b){return"[object String]"==Object.prototype.toString.call(b)};baidu.isString=baidu.lang.isString;baidu.sio._createScriptTag=function(d,e,f){d.setAttribute("type","text/javascript");f&&d.setAttribute("charset",f);d.setAttribute("src",e);document.getElementsByTagName("head")[0].appendChild(d)};baidu.sio._removeScriptTag=function(c){if(c.clearAttributes){c.clearAttributes()}else{for(var d in c){if(c.hasOwnProperty(d)){delete c[d]}}}if(c&&c.parentNode){c.parentNode.removeChild(c)}c=null};baidu.sio.callByServer=function(D,r,q){var v=document.createElement("SCRIPT"),w="bd__cbs__",t,z,p=q||{},A=p.charset,y=p.queryField||"callback",s=p.timeOut||0,C,B=new RegExp("(\\?|&)"+y+"=([^&]*)"),x;if(baidu.lang.isFunction(r)){t=w+Math.floor(Math.random()*2147483648).toString(36);window[t]=u(0)}else{if(baidu.lang.isString(r)){t=r}else{if(x=B.exec(D)){t=x[2]}}}if(s){C=setTimeout(u(1),s)}D=D.replace(B,"\x241"+y+"="+t);if(D.search(B)<0){D+=(D.indexOf("?")<0?"?":"&")+y+"="+t}baidu.sio._createScriptTag(v,D,A);function u(a){return function(){try{if(a){p.onfailure&&p.onfailure()}else{r.apply(window,arguments);clearTimeout(C)}window[t]=null;delete window[t]}catch(b){}finally{baidu.sio._removeScriptTag(v)}}}};baidu.dom._g=function(b){if(baidu.lang.isString(b)){return document.getElementById(b)}return b};baidu._g=baidu.dom._g;baidu.dom.getDocument=function(b){b=baidu.dom.g(b);return b.nodeType==9?b:b.ownerDocument||b.document};baidu.dom.getComputedStyle=function(e,f){e=baidu.dom._g(e);var g=baidu.dom.getDocument(e),h;if(g.defaultView&&g.defaultView.getComputedStyle){h=g.defaultView.getComputedStyle(e,null);if(h){return h[f]||h.getPropertyValue(f)}}return""};baidu.event=baidu.event||{};baidu.event._listeners=baidu.event._listeners||[];baidu.event.on=function(i,n,l){n=n.replace(/^on/i,"");i=baidu.dom._g(i);var m=function(a){l.call(i,a)},j=baidu.event._listeners,o=baidu.event._eventFilter,k,p=n;n=n.toLowerCase();if(o&&o[n]){k=o[n](i,n,m);p=k.type;m=k.listener}if(i.addEventListener){i.addEventListener(p,m,false)}else{if(i.attachEvent){i.attachEvent("on"+p,m)}}j[j.length]=[i,n,l,m,p];return i};baidu.on=baidu.event.on;baidu.page=baidu.page||{};baidu.page.getScrollTop=function(){var b=document;return window.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop};baidu.page.getScrollLeft=function(){var b=document;return window.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft};(function(){baidu.page.getMousePosition=function(){return{x:baidu.page.getScrollLeft()+b.x,y:baidu.page.getScrollTop()+b.y}};var b={x:0,y:0};baidu.event.on(document,"onmousemove",function(a){a=window.event||a;b.x=a.clientX;b.y=a.clientY})})();baidu.dom._styleFixer=baidu.dom._styleFixer||{};baidu.dom._styleFilter=baidu.dom._styleFilter||[];baidu.dom._styleFilter.filter=function(g,j,i){for(var h=0,k=baidu.dom._styleFilter,l;l=k[h];h++){if(l=l[i]){j=l(g,j)}}return j};baidu.string=baidu.string||{};baidu.string.toCamelCase=function(b){if(b.indexOf("-")<0&&b.indexOf("_")<0){return b}return b.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})};baidu.dom.getStyle=function(j,f){var h=baidu.dom;j=h.g(j);f=baidu.string.toCamelCase(f);var i=j.style[f]||(j.currentStyle?j.currentStyle[f]:"")||h.getComputedStyle(j,f);if(!i){var g=h._styleFixer[f];if(g){i=g.get?g.get(j):baidu.dom.getStyle(j,g)}}if(g=h._styleFilter){i=g.filter(f,i,"get")}return i};baidu.getStyle=baidu.dom.getStyle;baidu.browser=baidu.browser||{};baidu.browser.ie=baidu.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?(document.documentMode||+RegExp["\x241"]):undefined;baidu.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp["\x246"]||RegExp["\x242"]):undefined;baidu.browser.isWebkit=/webkit/i.test(navigator.userAgent);baidu.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);baidu.browser.isStrict=document.compatMode=="CSS1Compat";baidu.dom.getPosition=function(x){x=baidu.dom.g(x);var o=baidu.dom.getDocument(x),u=baidu.browser,r=baidu.dom.getStyle,v=u.isGecko>0&&o.getBoxObjectFor&&r(x,"position")=="absolute"&&(x.style.top===""||x.style.left===""),q={left:0,top:0},s=(u.ie&&!u.isStrict)?o.body:o.documentElement,n,w;if(x==s){return q}if(x.getBoundingClientRect){w=x.getBoundingClientRect();q.left=Math.floor(w.left)+Math.max(o.documentElement.scrollLeft,o.body.scrollLeft);q.top=Math.floor(w.top)+Math.max(o.documentElement.scrollTop,o.body.scrollTop);q.left-=o.documentElement.clientLeft;q.top-=o.documentElement.clientTop;var p=o.body,m=parseInt(r(p,"borderLeftWidth")),t=parseInt(r(p,"borderTopWidth"));if(u.ie&&!u.isStrict){q.left-=isNaN(m)?2:m;q.top-=isNaN(t)?2:t}}else{n=x;do{q.left+=n.offsetLeft;q.top+=n.offsetTop;if(u.isWebkit>0&&r(n,"position")=="fixed"){q.left+=o.body.scrollLeft;q.top+=o.body.scrollTop;break}n=n.offsetParent}while(n&&n!=x);if(u.opera>0||(u.isWebkit>0&&r(x,"position")=="absolute")){q.top-=o.body.offsetTop}n=x.offsetParent;while(n&&n!=o.body){q.left-=n.scrollLeft;if(!u.opera||n.tagName!="TR"){q.top-=n.scrollTop}n=n.offsetParent}}return q};baidu.array=baidu.array||{};baidu.array.indexOf=function(h,f,i){var g=h.length,j=f;i=i|0;if(i<0){i=Math.max(0,g+i)}for(;i<g;i++){if(i in h&&h[i]===f){return i}}return -1};baidu.array.contains=function(d,c){return(baidu.array.indexOf(d,c)>=0)};baidu.string.format=function(h,f){h=String(h);var e=Array.prototype.slice.call(arguments,1),g=Object.prototype.toString;if(e.length){e=e.length==1?(f!==null&&(/\[object Array\]|\[object Object\]/.test(g.call(f)))?f:e):e;return h.replace(/#\{(.+?)\}/g,function(c,a){var b=e[a];if("[object Function]"==g.call(b)){b=b(a)}return("undefined"==typeof b?"":b)})}return h};baidu.format=baidu.string.format;baidu.dom.insertHTML=function(i,g,j){i=baidu.dom.g(i);var f,h;if(i.insertAdjacentHTML&&!baidu.browser.opera){i.insertAdjacentHTML(g,j)}else{f=i.ownerDocument.createRange();g=g.toUpperCase();if(g=="AFTERBEGIN"||g=="BEFOREEND"){f.selectNodeContents(i);f.collapse(g=="AFTERBEGIN")}else{h=g=="BEFOREBEGIN";f[h?"setStartBefore":"setEndAfter"](i);f.collapse(h)}f.insertNode(f.createContextualFragment(j))}return i};baidu.insertHTML=baidu.dom.insertHTML;baidu.dom._NAME_ATTRS=(function(){var a={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};if(baidu.browser.ie<8){a["for"]="htmlFor";a["class"]="className"}else{a.htmlFor="for";a.className="class"}return a})();baidu.dom.setAttr=function(b,a,c){b=baidu.dom.g(b);if("style"==a){b.style.cssText=c}else{a=baidu.dom._NAME_ATTRS[a]||a;b.setAttribute(a,c)}return b};baidu.setAttr=baidu.dom.setAttr;baidu.event.getKeyCode=function(b){return b.which||b.keyCode};baidu.object=baidu.object||{};baidu.extend=baidu.object.extend=function(f,e){for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f};baidu.object.values=function(g){var f=[],h=0,e;for(e in g){if(g.hasOwnProperty(e)){f[h++]=g[e]}}return f};baidu.lang.isNumber=function(b){return"[object Number]"==Object.prototype.toString.call(b)&&isFinite(b)};(function(){var u=baidu.browser,n={keydown:1,keyup:1,keypress:1},x={click:1,dblclick:1,mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1},q={abort:1,blur:1,change:1,error:1,focus:1,load:u.ie?0:1,reset:1,resize:1,scroll:1,select:1,submit:1,unload:u.ie?0:1},s={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},o={KeyEvents:["bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],MouseEvents:["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],HTMLEvents:["bubbles","cancelable"],UIEvents:["bubbles","cancelable","view","detail"],Events:["bubbles","cancelable"]};baidu.object.extend(s,n);baidu.object.extend(s,x);function v(b,d){var e=0,a=b.length,c={};for(;e<a;e++){c[b[e]]=d[b[e]];delete d[b[e]]}return c}function t(d,e,a){a=baidu.object.extend({},a);var c=baidu.object.values(v(o[e],a)),b=document.createEvent(e);c.unshift(d);if("KeyEvents"==e){b.initKeyEvent.apply(b,c)}else{if("MouseEvents"==e){b.initMouseEvent.apply(b,c)}else{if("UIEvents"==e){b.initUIEvent.apply(b,c)}else{b.initEvent.apply(b,c)}}}baidu.object.extend(b,a);return b}function w(a){var b;if(document.createEventObject){b=document.createEventObject();baidu.object.extend(b,a)}return b}function r(c,a){a=v(o.KeyEvents,a);var b;if(document.createEvent){try{b=t(c,"KeyEvents",a)}catch(d){try{b=t(c,"Events",a)}catch(e){b=t(c,"UIEvents",a)}}}else{a.keyCode=a.charCode>0?a.charCode:a.keyCode;b=w(a)}return b}function m(c,a){a=v(o.MouseEvents,a);var b;if(document.createEvent){b=t(c,"MouseEvents",a);if(a.relatedTarget&&!b.relatedTarget){if("mouseout"==c.toLowerCase()){b.toElement=a.relatedTarget}else{if("mouseover"==c.toLowerCase()){b.fromElement=a.relatedTarget}}}}else{a.button=a.button==0?1:a.button==1?4:baidu.lang.isNumber(a.button)?a.button:0;b=w(a)}return b}function p(d,a){a.bubbles=s.hasOwnProperty(d);a=v(o.HTMLEvents,a);var b;if(document.createEvent){try{b=t(d,"HTMLEvents",a)}catch(c){try{b=t(d,"UIEvents",a)}catch(e){b=t(d,"Events",a)}}}else{b=w(a)}return b}baidu.event.fire=function(d,c,a){var b;c=c.replace(/^on/i,"");d=baidu.dom._g(d);a=baidu.object.extend({bubbles:true,cancelable:true,view:window,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0,button:0,relatedTarget:null},a);if(n[c]){b=r(c,a)}else{if(x[c]){b=m(c,a)}else{if(q[c]){b=p(c,a)}else{throw (new Error(c+" is not support!"))}}}if(b){if(d.dispatchEvent){d.dispatchEvent(b)}else{if(d.fireEvent){d.fireEvent("on"+c,b)}}}}})();baidu.event.getTarget=function(b){return b.target||b.srcElement};baidu.array.remove=function(f,d){var e=f.length;while(e--){if(e in f&&f[e]===d){f.splice(e,1)}}return f};baidu.dom.show=function(b){b=baidu.dom.g(b);b.style.display="";return b};baidu.show=baidu.dom.show;baidu.dom.getParent=function(a){a=baidu.dom._g(a);return a.parentElement||a.parentNode||null};baidu.event.stopPropagation=function(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}};baidu.event.preventDefault=function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};baidu.event.stop=function(a){var b=baidu.event;b.stopPropagation(a);b.preventDefault(a)};T.undope=true;if(bdPass.api.params.insertApiScript){bdPass.api.params.insertApiScript()};