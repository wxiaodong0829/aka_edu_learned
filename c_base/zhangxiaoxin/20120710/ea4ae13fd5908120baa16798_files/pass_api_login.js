var bdPass=bdPass||{};bdPass.api=bdPass.api||{};bdPass.api.login=bdPass.api.login||(function(){var t="https://passport.baidu.com/",h=t+"v2/api/?login",i=t+"v2/api/?logincheck",y="https://passport.baidu.com/cgi-bin/genimage?",o=t+"img/v2/small_blank.gif",p=t+"forcsdnpasschange",s=document.charset||document.characterSet||"UTF-8",j={outerDomId:"",loginType:1,staticpage:"",u:"",bindEnterSubmit:false,safeflg:0,isMen:true,isPhone:false,onReady:function(H){},onInputErr:function(I,J,H){},onInputOk:function(H){},onSubmitStart:function(H){H.submit()},onCheckErr:function(I,H){},onSubmitedErr:function(I,H){},onSystemErr:function(J,I,H){},onLoginSuccess:function(I,H,J){if(H){H=decodeURIComponent(H);if(J.needToModifyPassword=="1"){document.location=p+"?u="+H}else{document.location=decodeURIComponent(H)}}}},z=[],f={username:{type:"username",inputType:"text",rdNameKey:"username",label:"\u5E10\u53f7\uff1a",err:{"-2":"\u8bf7\u586b\u5199\u5E10\u53f7","-3":"\u5E10\u53f7\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","-11":"\u60a8\u5c1d\u8bd5\u4f7f\u7528\u90ae\u7bb1\u767b\u5f55\uff0c\u4f46\u90ae\u7bb1\u592a\u957f\u3002\uff08\u4e0d\u8d85\u8fc760\u4e2a\u5b57\u8282\uff09","-21":"\u60a8\u5c1d\u8bd5\u4f7f\u7528\u7528\u6237\u540d\u767b\u5f55\uff0c\u4f46\u7528\u6237\u540d\u592a\u957f\u3002\uff08\u4e0d\u8d85\u8fc77\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u8282\uff09","1":"\u7528\u6237\u540d\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2":"\u6b64\u5E10\u53f7\u4e0d\u5b58\u5728"},initEvent:[{eventType:"blur",runBeforeSubmit:false,listener:function(){a("username",this)}},{eventType:"keydown",runBeforeSubmit:false,listener:function(H){}},{eventType:"change",runBeforeSubmit:true,listener:function(I,J){var K=J?baidu.g(I):this;if(a("username",K)){var L=K.value,H=L.length;if(/^[0-9a-zA-Z\.\_-]+@([0-9a-zA-Z-]+\.)+[a-z]{2,4}$/.test(L)){if(H>60){d("username",K,"-11");return false}else{if(!J){F(K)}c(K);return true}}else{if(!J){F(K)}c(K);return true}}else{return false}}}]},phoneNumber:{type:"phoneNumber",inputType:"text",rdNameKey:"username",label:"\u624b\u673a\u53f7\uff1a",err:{"-2":"\u8bf7\u586b\u5199\u624b\u673a\u53f7","-3":"\u5E10\u53f7\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","1":"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2":"\u6b64\u5E10\u53f7\u4e0d\u5b58\u5728"},initEvent:[{eventType:"blur",runBeforeSubmit:false,listener:function(){a("username",this)}},{eventType:"keydown",runBeforeSubmit:false,listener:function(H){r(H)}},{eventType:"change",runBeforeSubmit:true,listener:function(H,I){var J=I?baidu.g(H):this;if(a("phoneNumber",J)){if(/^\d{1,11}$/.test(J.value)){if(!I){F(J)}c(J);return true}else{d("phoneNumber",J,"-3");return false}}else{return false}}}]},password:{type:"password",inputType:"password",rdNameKey:"password",label:"\u5bc6\u7801\uff1a",err:{"-2":"\u8bf7\u586b\u5199\u5bc6\u7801","4":"\u767b\u5f55\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"},initEvent:[{eventType:"keydown",runBeforeSubmit:false,listener:function(H){r(H)}},{eventType:"blur",runBeforeSubmit:true,listener:function(H,I){var J=I?baidu.g(H):this;if(a("password",J)){c(J);return true}else{return false}}}]},verifycode:{type:"verifycode",inputType:"text",rdNameKey:"verifycode",maxlength:'maxlength="4"',label:"\u9a8c\u8bc1\u7801\uff1a",err:{"-2":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801","6":"\u9a8c\u8bc1\u7801\u4e0d\u5339\u914d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u9a8c\u8bc1\u7801","257":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},initEvent:[{eventType:"keydown",runBeforeSubmit:false,listener:function(H){r(H)}},{eventType:"blur",runBeforeSubmit:true,listener:function(H,I){var J=I?baidu.g(H):this;if(a("verifycode",J)){c(J);return true}else{return false}}}]}},C={"-1":"\u767b\u5f55\u65f6\u53d1\u751f\u672a\u77e5\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","5":"\u60a8\u5c1d\u8bd5\u767b\u5f55\u6b21\u6570\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf724\u5c0f\u65f6\u540e\u518d\u8bd5","16":"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u73b0\u5728\u65e0\u6cd5\u767b\u5f55","100005":"\u6b64\u5e10\u53f7\u5df2\u767b\u5f55\u4eba\u6570\u8fc7\u591a","110024":"\u6b64\u5E10\u53f7\u8fd8\u672a\u6fc0\u6d3b\uff0c\u8bf7\u5230\u9a8c\u8bc1\u90ae\u4ef6\u4e2d\u6fc0\u6d3b\uff0c\u6216\u8005\u91cd\u53d1\u9a8c\u8bc1\u90ae\u4ef6"},B='<p class="pass_login_p pass_login_p_#{type}" id="pass_login_p_#{type}_#{indexNumber}"><label class="pass_login_label pass_login_label_#{type}" id="pass_login_label_#{type}_#{indexNumber}" for="pass_login_#{type}_#{indexNumber}">#{label}</label><input class="pass_login_input pass_login_input_#{type}" type="#{inputType}" id="pass_login_#{type}_#{indexNumber}" name="#{rdNameKey}"/><span class="pass_login_err" id="pass_login_#{type}_#{indexNumber}_err"></span></p>',w='<p class="pass_login_p pass_login_p_img_verifycode" id="pass_login_p_img_verifycode_#{indexNumber}"><img src="#{_tempImgUrl}" class="pass_login_verifycode" id="pass_login_img_verifycode_#{indexNumber}" alt="\u9a8c\u8bc1\u7801\u56fe\u7247" title="\u9a8c\u8bc1\u7801\u56fe\u7247" /><span class="pass_login_change_verifycode" id="pass_login_change_verifycode_#{indexNumber}">\u770b\u4e0d\u6e05\uff1f</span></p>',e='<form class ="pass_login_form" id="pass_login_form_#{indexNumber}" form_number="#{indexNumber}" action="#{formAction}" target="pass_login_iframe_#{indexNumber}" method="post" style="display:none;"><iframe name="pass_login_iframe_#{indexNumber}" id="pass_login_iframe_#{indexNumber}" src="javascript:\'\'" style="display:none;"></iframe><p class="pass_login_p" id="pass_login_p_generalerror_#{indexNumber}"><span class="pass_login_generalerror" id="pass_login_generalerror_#{indexNumber}"></span></p>',g='<p class="pass_login_p pass_login_p_rem" id="pass_login_p_rem_#{indexNumber}"><input class="pass_login_input pass_login_input_rem" id="pass_login_rem_#{indexNumber}" name="mem_pass" type="checkbox"#{isMen}/><label class="pass_login_label pass_login_label_rem" id="pass_login_label_rem_#{indexNumber}" for="pass_login_rem_#{indexNumber}">\u8bb0\u4f4f\u6211\u7684\u767b\u5f55\u72b6\u6001</label></p><p class="pass_login_p pass_login_p_des" id="pass_login_p_des_#{indexNumber}">\u4f7f\u7528\u516c\u7528\u7535\u8111\u8bf7\u52ff\u9009\u62e9\u8be5\u9879</p><p class="pass_login_p pass_login_p_btn" id="pass_login_p_btn_#{indexNumber}"><input class="pass_login_input pass_login_input_submit" id="pass_login_input_submit_#{indexNumber}" type="button" value="\u767b\u5f55"/><a href="https://passport.baidu.com/?getpass_index" class="pass_login_a_fgtpwd" id="pass_login_a_fgtpwd_#{indexNumber}">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a></p></form>',b='<input type="hidden" id="pass_login_hidden_#{name}_#{indexNumber}" name="#{name}" value="#{value}"/>',l=function(H){z.push({myConfig:{},formHiddenElements:{}});var J=z.length-1;for(var I in j){if(H&&typeof(j[I])==typeof(H[I])){z[J].myConfig[I]=H[I]}else{z[J].myConfig[I]=j[I]}}z[J].myConfig.formSimpleElementsArray=z[J].myConfig.isPhone?["phoneNumber","password","verifycode"]:["username","password","verifycode"];m(J,[{key:"callback",value:"parent.bdPass.api.login._postCallback"},{key:"tpl",value:bdPass.api.params.login_tpl||""},{key:"loginType",value:z[J].myConfig.loginType},{key:"staticpage",value:z[J].myConfig.staticpage},{key:"safeflg",value:z[J].myConfig.safeflg},{key:"u",value:z[J].myConfig.u},{key:"index",value:J},{key:"isPhone",value:z[J].myConfig.isPhone?true:false},{key:"token",value:bdPass.api.params.login_token},{key:"codestring",value:bdPass.api.params.login_vcodestring||""},{key:"charset",value:s},{key:"ppui_logintime",value:""}]);v(J);bdPass.api.login.loginTime=bdPass.api.login.loginTime||[];bdPass.api.login.loginTime[J]=+new Date},m=function(K,J){for(var I=0,H=J.length;I<H;I++){z[K].formHiddenElements[J[I].key]={name:J[I].key,value:J[I].value,indexNumber:K}}},G=function(N){var K=N.error+"",M=N.index,I=N.u;var L=N.hao123Param||"";var J=function(P){var Q=[];return function(S){var R=Q.push(new Image)-1;Q[R].onload=function(){P&&P();Q[R]=Q[R].onload=null};Q[R].src=S}}();if(K=="0"){if("https:"==document.location.protocol){z[M].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+M),I,N)}else{var O=setTimeout(function(){z[M].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+M),I,N)},1000);J("http://user.hao123.com/static/crossdomain.php?bdu="+L+"&t="+Math.random(),function(){clearTimeout(O);z[M].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+M),I,N)})}}else{if(N.codestring&&N.codestring!="undefined"){u(M,N.codestring,true)}else{x(M,true)}var H;switch(K){case"1":case"2":H=z[M].myConfig.isPhone?"phoneNumber":"username";break;case"4":H="password";break;case"6":case"257":H="verifycode";break;case"-1":case"5":case"16":case"100005":case"110024":H="generalerror";break;default:H="generalerror";K="-1";break}d(H,baidu.g("pass_login_"+H+"_"+M),K,{mail:N.mail});z[M].myConfig.onSubmitedErr(baidu.g("pass_login_form_"+M),baidu.g("pass_login_"+H+"_"+M))}},v=function(H){z[H].myindexNumber=H;var I,L=z[H].myConfig.formSimpleElementsArray,J="",R={indexNumber:H,formAction:h,remInputName:z[H].remInputName,isMen:z[H].myConfig.isMen?' checked="checked"':""},Q="pass_login_form_"+H;I=L.length;J+=baidu.string.format(e,R);J+=baidu.string.format(g,R);baidu.g(z[H].myConfig.outerDomId).innerHTML+=J;baidu.event.on("pass_login_input_submit_"+H,"click",D);while(I){J="";var N=f[L[I-1]];if(N){N.indexNumber=H;var P="pass_login_"+N.type+"_"+H;z[H][N.type+"_id"]=P;J+=baidu.string.format(B,N);if(N.type=="verifycode"){N._tempImgUrl=o;J+=baidu.string.format(w,N)}}baidu.dom.insertHTML(Q,"afterBegin",J);if(N.type=="verifycode"){var S=z[H].formHiddenElements.codestring.value;if(S){u(H,S,false)}else{x(H,false)}baidu.event.on("pass_login_change_verifycode_"+H,"click",function(V){var T=A(this.id);var U=baidu.g("pass_login_img_verifycode_"+T);U.src=y+baidu.g("pass_login_form_"+T)["codestring"].value+"&v="+new Date().getTime()})}q(P,N,"initEvent");I--}var M=z[H].formHiddenElements;for(var O in M){baidu.dom.insertHTML(Q,"afterBegin",baidu.string.format(b,M[O]))}var K=baidu.g(Q);K.style.display="";z[H].myConfig.onReady(K)},q=function(L,M,K){if(K!="initEvent"&&K!="actionEvent"){return}var I=M[K];if(I){for(var J=0,H=I.length;J<H;J++){baidu.event.on(L,I[J].eventType,I[J].listener)}}},F=function(H){var I=A(H.id);baidu.sio.callByServer(i+"&callback=bdPass.api.login._needCodestringCheckCallback&tpl="+(bdPass.api.params.login_tpl||"")+"&charset="+s+"&index="+I+"&username="+H.value+"&time="+new Date().getTime())},E=function(H){if(H.errno==0){if(H.codestring){u(H.index,H.codestring,true)}else{x(H.index,true)}}},D=function(N){var H=baidu.event.getTarget(N).form,S=H.getAttribute("form_number"),R=z[S];var I=R.myConfig.haveCodeString?R.myConfig.formSimpleElementsArray:baidu.array.remove(R.myConfig.formSimpleElementsArray,"verifycode");for(var L=0,J=I.length;L<J;L++){for(var K=0,Q=f[I[L]].initEvent,P=Q.length;K<P;K++){var M=Q[K];if(M.runBeforeSubmit){var O="pass_login_"+I[L]+"_"+R.myindexNumber;if(!M.listener(O,true)){z[S].myConfig.onCheckErr(H,baidu.g(O));return}}}}baidu.g("pass_login_generalerror_"+S).innerHTML="";baidu.dom.g("pass_login_hidden_ppui_logintime_"+S).value=+new Date-bdPass.api.login.loginTime[S];z[S].myConfig.onSubmitStart(H)},a=function(I,H){if(H&&H.value==""){d(I,H,"-2");return false}else{return true}},n=function(H){if(typeof(H)=="string"){return H+"_err"}else{return baidu.g(H).id+"_err"}},d=function(J,I,L,H){var H=H||null;L+="";var M=A(I.id);if(J=="generalerror"){I.innerHTML=C[L];z[M].myConfig.onSystemErr(baidu.g("pass_login_form_"+M),L,H)}else{var K,M;K=baidu.g(n(I));K.innerHTML=f[J].err[L];z[M].myConfig.onInputErr(I,L,H)}if(L!=110024){}},c=function(H){var I=A(H.id);k(H);z[I].myConfig.onInputOk(H)},k=function(H){var I=baidu.g(n(H));I.innerHTML=""},A=function(H){return H.charAt(H.length-1)},u=function(J,H,I){z[J].myConfig.haveCodeString=true;z[J].myConfig.formSimpleElementsArray=[z[J].myConfig.formSimpleElementsArray[0],z[J].myConfig.formSimpleElementsArray[1],"verifycode"];baidu.g("pass_login_img_verifycode_"+J).setAttribute("src",y+H+"&v="+new Date().getTime());if(I){baidu.g("pass_login_hidden_codestring_"+J).value=H}baidu.g("pass_login_p_verifycode_"+J).style.display=baidu.g("pass_login_p_img_verifycode_"+J).style.display=""},x=function(I,H){z[I].myConfig.haveCodeString=false;z[I].myConfig.formSimpleElementsArray=[z[I].myConfig.formSimpleElementsArray[0],z[I].myConfig.formSimpleElementsArray[1]];if(H){baidu.g("pass_login_hidden_codestring_"+I).value=""}baidu.g("pass_login_p_verifycode_"+I).style.display=baidu.g("pass_login_p_img_verifycode_"+I).style.display="none"},r=function(H){if(baidu.event.getKeyCode(H)=="13"){baidu.event.fire("pass_login_input_submit_"+A(baidu.event.getTarget(H).id),"click")}};return{init:function(H){if(H&&H.outerDomId&&typeof(H.outerDomId)=="string"&&H.staticpage&&typeof(H.staticpage)=="string"){l(H)}else{throw new Error("\u914d\u7f6e\u9879\u7f3a\u5c11\u5fc5\u586b\u9879\uff0c\u914d\u7f6e\u9879\u5bf9\u8c61\u5fc5\u987b\u6709<string>outerDomId\u548c<string>staticpage\u5b57\u6bb5");return}},_needCodestringCheckCallback:function(H){E(H)},_postCallback:function(H){G(H)}}})();(function(){window.bdPass.LoginTemplate=window.bdPass.LoginTemplate||{};window.bdPass.LoginTemplate.render=function(d,a,b){if(!b.jumpUrl){alert("No jumpUrl");throw new Error("No jumpUrl");return}var c=b;c.outerDomId=a;c.staticpage=b.jumpUrl;c.onSubmitStart=b.onSubmit;c.onLoginSuccess=b.onSuccess;c.onReady=b.onAfterRender;c.onSystemErr=b.onSystemError;bdPass.api.login.init(c)};if(bdPass.api.params.userCallback){bdPass.api.params.userCallback()}bdPass.api["parent.bdPass.api.login._postCallback"]=bdPass.api.login._postCallback})();